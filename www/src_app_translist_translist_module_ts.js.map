{"version":3,"sources":["./src/app/translist/translist-routing.module.ts","./src/app/translist/translist.module.ts","./src/app/translist/translist.page.ts","./src/app/translist/translist.page.scss","./src/app/translist/translist.page.html"],"names":[],"mappings":"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","file":"src_app_translist_translist_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TranslistPage } from './translist.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TranslistPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TranslistPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TranslistPageRoutingModule } from './translist-routing.module';\n\nimport { TranslistPage } from './translist.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslistPageRoutingModule\n  ],\n  declarations: [TranslistPage]\n})\nexport class TranslistPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Storage } from '@ionic/storage-angular';\nimport { LoadingController, AlertController, NavController } from '@ionic/angular';\nimport { environment } from '../../../src/environments/environment';  \nimport axios from 'axios';\n\n@Component({\n  selector: 'app-translist',\n  templateUrl: './translist.page.html',\n  styleUrls: ['./translist.page.scss'],\n})\nexport class TranslistPage implements OnInit {\n  vehicle_id: String;\n  transactions: Array <Object>;\n  vehicle: any;\n  constructor(\n    private router: Router,\n    private route : ActivatedRoute,\n    public loadingController: LoadingController, \n    public alertController: AlertController,\n    private storage: Storage,\n    private navCtrl: NavController\n  ) { \n    this.vehicle_id = this.route.snapshot.paramMap.get('vehicle_id');\n  \n  }\n  async ngOnInit() {\n    const data  = await this.storage.get(\"data\")\n    this.transactions = data.vehicles.find(x => x.id == this.vehicle_id).travels.sort((a,b)=>b.id-a.id);\n  }\n\n  async ionViewDidEnter(){\n    const data  = await this.storage.get(\"data\")\n    this.transactions = data.vehicles.find(x => x.id == this.vehicle_id).travels.sort((a,b)=>b.id-a.id);\n    this.vehicle = data.vehicles.find(x => x.id == this.vehicle_id)\n  }\n\n  async delete(transaction_id){\n    let decision = false;\n    const alert = await this.alertController.create({\n      header: 'Alert',\n      message: 'Do you really want to delete this record?',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => {\n            decision = false;\n          }\n        },\n        {\n          text: 'Yes',\n          handler: async() => {\n            const loading = await this.loadingController.create({message: 'Please wait'})\n            await loading.present()\n            try {\n              const token = await this.storage.get('access_token');\n              \n              const config = {\n                headers: {\n                  'Access-Control-Allow-Origin': '*', \n                  'Authorization': `Bearer ${token}`\n                }\n              }\n              const URL = `${environment.API_HOST}/travels/${transaction_id}`;\n              const form = {\n                transaction_id : transaction_id\n              }\n        \n        \n              const response = await axios.delete(URL, { \n                  headers : {\n                      'Access-Control-Allow-Origin': '*', \n                      'Authorization': `Bearer ${token}`\n                  }\n              });\n              await this.storage.set('data', response.data.data)\n        \n              loading.dismiss()\n        \n              const alert = await this.alertController.create({\n                header: 'Deleted',\n                message: response.data.message,\n                buttons: ['OK'] \n              })\n              \n              await alert.present();\n              this.ionViewDidEnter();\n            } catch (error) {\n              loading.dismiss();\n              const alert = await this.alertController.create({\n                header: 'Error',\n                message: 'Please contact system Administrator',\n                buttons: ['OK'] \n              })\n              \n              await alert.present();\n            }\n          }\n        }\n      ]\n\n    })\n    \n    await alert.present();\n\n  \n\n  }\n\n\n\n\n}\n","export default \".md .centered-p {\\n  text-align: center;\\n  margin-left: -25%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYW5zbGlzdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLGlCQUFBO0FBQ0oiLCJmaWxlIjoidHJhbnNsaXN0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tZCAuY2VudGVyZWQtcCB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIG1hcmdpbi1sZWZ0OiAtMjUlXG4gIH0iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title class=\\\"\\\">\\n      <p class=\\\"centered-p\\\">Travel record list</p>\\n    </ion-title>\\n\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/vinfo\\\" name=\\\"arrow-back-outline\\\"></ion-back-button>\\n    </ion-buttons>\\n\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [scrollEvents]=\\\"true\\\" (ionScrollStart)=\\\"logScrollStart()\\\" (ionScroll)=\\\"logScrolling($event)\\\"\\n(ionScrollEnd)=\\\"logScrollEnd()\\\">\\n\\n<ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n  <ion-fab-button [routerLink]=\\\"['/trans',vehicle_id]\\\">\\n    <ion-icon name=\\\"add\\\"></ion-icon>\\n  </ion-fab-button>\\n</ion-fab>\\n\\n<ion-list>\\n  <ion-item-sliding  *ngFor=\\\"let transaction of transactions\\\">\\n    <ion-item>\\n      <ion-label [routerLink]=\\\"['/transinfo', vehicle_id,transaction.id]\\\">[Fr]{{transaction.address_start}} - [To]{{transaction.address_end}}</ion-label>\\n       <!-- <span item-end>{{(transaction.odometer_end  - transaction.odometer_start).toLocaleString()}} kms</span> -->\\n       <span item-end>{{(transaction.odometer_end  - transaction.odometer_start).toLocaleString()}} kms</span>\\n    </ion-item>\\n    <ion-item-options side=\\\"end\\\">\\n      <ion-item-option (click)=\\\"delete(transaction.id)\\\">Delete</ion-item-option>\\n    </ion-item-options>\\n  </ion-item-sliding>\\n  <ion-item>\\n    <ion-label></ion-label>\\n     <span item-end>Total: {{vehicle?.last_odometer.toLocaleString()}} kms</span>\\n  </ion-item>\\n</ion-list>\\n\\n\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}