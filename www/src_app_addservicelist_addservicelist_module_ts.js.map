{"version":3,"sources":["./src/app/addservicelist/addservicelist-routing.module.ts","./src/app/addservicelist/addservicelist.module.ts","./src/app/addservicelist/addservicelist.page.ts","./src/app/addservicelist/addservicelist.page.scss","./src/app/addservicelist/addservicelist.page.html"],"names":[],"mappings":"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","file":"src_app_addservicelist_addservicelist_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AddservicelistPage } from './addservicelist.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AddservicelistPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AddservicelistPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AddservicelistPageRoutingModule } from './addservicelist-routing.module';\r\n\r\nimport { AddservicelistPage } from './addservicelist.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    AddservicelistPageRoutingModule\r\n  ],\r\n  declarations: [AddservicelistPage]\r\n})\r\nexport class AddservicelistPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { environment } from '../../../src/environments/environment';  \r\nimport { LoadingController, AlertController , NavController} from '@ionic/angular';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport axios from 'axios';\r\n\r\n@Component({\r\n  selector: 'app-addservicelist',\r\n  templateUrl: './addservicelist.page.html',\r\n  styleUrls: ['./addservicelist.page.scss'],\r\n})\r\nexport class AddservicelistPage implements OnInit {\r\n  form: FormGroup;\r\n  services : Array<any>;\r\n  name: String;\r\n  selected_services: Array<any>;\r\n  date: String;\r\n  providers: Array<any>;\r\n  selected_provider: Object;\r\n  cost: String;\r\n  notes: String;\r\n\r\n  vehicle_id: Number;\r\n  service_id: Number;\r\n  mode: String;\r\n  constructor(\r\n    public formBuilder: FormBuilder, \r\n    private route: ActivatedRoute, \r\n    private storage: Storage, \r\n    public loadingController: LoadingController, \r\n    public alertController: AlertController,\r\n    private navCtrl: NavController,\r\n    private router: Router,\r\n    ) { \r\n    this.initForm();\r\n    this.services =[\r\n        {\r\n          id : 1,\r\n          label: 'Air'\r\n        },\r\n        {\r\n          id : 2,\r\n          label: 'Tire Replacement'\r\n        },\r\n        {\r\n          id : 3,\r\n          label: 'Scratch'\r\n        },\r\n        {\r\n          id : 4,\r\n          label: 'Seat Cover'\r\n        },\r\n        {\r\n          id : 5,\r\n          label: 'Light'\r\n        }\r\n    ];\r\n\r\n    this.providers = [\r\n      {\r\n        id: 1,\r\n        label: 'Motortrade'\r\n      },\r\n      {\r\n        id: 2,\r\n        label: 'Toyota'\r\n      },\r\n      {\r\n        id: 3,\r\n        label: 'Hyundai'\r\n      },\r\n      {\r\n        id: 4,\r\n        label: 'Honda'\r\n      },\r\n      {\r\n        id: 5,\r\n        label: 'Mitsubishi'\r\n      }\r\n    ]\r\n\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.vehicle_id = parseInt(this.route.snapshot.paramMap.get('vehicle_id'));\r\n    this.service_id = parseInt(this.route.snapshot.paramMap.get('service_id'));\r\n    this.mode = this.route.snapshot.paramMap.get('mode') != null ? this.route.snapshot.paramMap.get('mode') : 'create';\r\n  }\r\n\r\n  async initForm() {\r\n    this.mode = this.route.snapshot.paramMap.get('mode') != null ? this.route.snapshot.paramMap.get('mode') : 'create';\r\n\r\n    if(this.mode == 'create'){\r\n      this.name = null;\r\n      this.selected_services = [];\r\n      this.date = null;\r\n      this.selected_provider = {};\r\n      this.cost = null;\r\n      this.notes =  null;\r\n\r\n    }else{\r\n      const sData = await this.storage.get('data');\r\n      const service = sData.vehicles.find(x => x.id == this.vehicle_id).service_summary.find(x=>x.id == this.service_id);\r\n\r\n      this.name = service.name;\r\n      this.selected_services = service.services.map(service=> service.service_id.toString())\r\n      this.selected_provider = service.provider_id.toString()\r\n      this.date = new Date(service.date).toISOString();\r\n      this.cost = service.cost;\r\n      this.notes = service.notes;\r\n    }\r\n  }\r\n\r\n  async submitForm(){\r\n    // console.log('provider', this.selected_provider)\r\n    const loading = await this.loadingController.create({message: 'Please wait'})\r\n    await loading.present()\r\n\r\n\r\n    const token = await this.storage.get('access_token');\r\n    const config = {\r\n      headers: {\r\n        'Access-Control-Allow-Origin': '*',\r\n        'Authorization': `Bearer ${token}`\r\n      },\r\n    };\r\n    const URL = environment.API_HOST;;\r\n    try{\r\n      const form = {\r\n        name: this.name,\r\n        service_ids : this.selected_services,\r\n        date : this.date,\r\n        provider_id : this.selected_provider,\r\n        cost : this.cost,\r\n        notes : this.notes,\r\n        vehicle_id: this.vehicle_id\r\n      }\r\n      // form.vehicle_id = this.vehicle_id;\r\n      const res = await axios.post(`${URL}/vehicles/${this.vehicle_id}/services/create`, form, config)\r\n      await loading.dismiss();\r\n      const sData = await this.storage.get('data');\r\n      console.log('before', sData);\r\n      sData.vehicles.find(x=>x.id == this.vehicle_id).service_summary.push(res.data.data.service)\r\n      console.log(sData.vehicles.find(x=>x.id == this.vehicle_id))\r\n      await this.storage.set('data',sData);\r\n      console.log('after',sData);\r\n      const alert = await this.alertController.create({\r\n        header: 'Success',\r\n        message: 'Service Added',\r\n        buttons: ['OK'] \r\n      })\r\n      await alert.present();\r\n      this.navCtrl.back();      \r\n    }\r\n    catch(e){\r\n      console.log(e);\r\n      await loading.dismiss();\r\n      const alert = await this.alertController.create({\r\n        header: 'Alert',\r\n        message: 'Error',\r\n        buttons: ['OK'] \r\n      })\r\n      await alert.present();\r\n    }\r\n  }\r\n\r\n  compareWith(o1, o2) {\r\n    return o1 && o2 ? o1.id === o2.id : o1 === o2;\r\n  }\r\n\r\n}\r\n","export default \".md .centered-p {\\n  text-align: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZHNlcnZpY2VsaXN0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0FBQ0oiLCJmaWxlIjoiYWRkc2VydmljZWxpc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1kIC5jZW50ZXJlZC1wIHtcclxuICAgIHRleHQtYWxpZ246IGF1dG87XHJcbiAgICBcclxuICB9Il19 */\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title class=\\\"\\\">\\r\\n      <p class=\\\"centered-p\\\">Other Services</p>\\r\\n    </ion-title>\\r\\n\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/slist\\\" name=\\\"arrow-back-outline\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <!-- <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button>\\r\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab> -->\\r\\n\\r\\n  <ion-list lines=\\\"none\\\">\\r\\n\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label position=\\\"floating\\\">Owners Name</ion-label>\\r\\n        <ion-input [(ngModel)]=\\\"name\\\" type=\\\"text\\\" required></ion-input>\\r\\n      </ion-item>\\r\\n\\r\\n\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label> Other Service Type/s</ion-label>\\r\\n        <ion-select multiple [(ngModel)]=\\\"selected_services\\\" >\\r\\n          <ion-select-option \\r\\n          *ngFor=\\\"let service of services\\\" \\r\\n          value=\\\"{{service.id}}\\\"\\r\\n          >{{service.label}}</ion-select-option>\\r\\n        </ion-select>\\r\\n      </ion-item>\\r\\n      <ion-item>Date of Service</ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>Date of Service</ion-label>\\r\\n        <ion-datetime [(ngModel)]=\\\"date\\\" displayFormat=\\\"DD.MM.YYYY\\\" presentation=\\\"date\\\"></ion-datetime>\\r\\n      </ion-item>\\r\\n\\r\\n        <!-- <ion-item>\\r\\n          <ion-label>Service Provider</ion-label>\\r\\n          <ion-select [(ngModel)]=\\\"provider_id\\\">\\r\\n            <ion-select-option value=\\\"1\\\">Motortrade</ion-select-option>\\r\\n            <ion-select-option value=\\\"2\\\">Toyota</ion-select-option>\\r\\n            <ion-select-option value=\\\"3\\\">Hyundai</ion-select-option>\\r\\n            <ion-select-option value=\\\"4\\\">Honda</ion-select-option>\\r\\n            <ion-select-option value=\\\"5\\\">Mitsubish</ion-select-option>\\r\\n          </ion-select>\\r\\n        </ion-item> -->\\r\\n\\r\\n        <ion-item >\\r\\n          <ion-label position=\\\"floating\\\">Service Provider</ion-label>\\r\\n          <!-- <ion-input [(ngModel)]=\\\"provider_id\\\"></ion-input> -->\\r\\n          <ion-select [(ngModel)]=\\\"selected_provider\\\" >\\r\\n            <ion-select-option *ngFor=\\\"let provider of providers\\\" value=\\\"{{provider.id}}\\\" >{{provider.label}}</ion-select-option>\\r\\n          </ion-select>\\r\\n        </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label>Cost</ion-label>\\r\\n        <ion-input  placeholder=\\\"â‚±0.00\\\" inputmode=\\\"decimal\\\"  name=\\\"amount\\\" [(ngModel)]=\\\"cost\\\"></ion-input>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label>Notes</ion-label>\\r\\n        <ion-textarea [(ngModel)]=\\\"notes\\\" rows=\\\"9\\\" cols=\\\"20\\\" placeholder=\\\"Enter any notes here...\\\">\\r\\n        </ion-textarea>\\r\\n      </ion-item>\\r\\n      <ion-button size=\\\"large\\\" expand=\\\"block\\\" shape=\\\"round\\\" color=\\\"dark\\\" *ngIf=\\\"mode=='create'\\\"\\r\\n      (click)=\\\"submitForm()\\\"  >\\r\\n      <!--  [disabled]=\\\"!form?.valid\\\" -->\\r\\n      <ion-text>Submit</ion-text>\\r\\n    </ion-button>\\r\\n  </ion-list>\\r\\n</ion-content>\";"],"sourceRoot":"webpack:///"}